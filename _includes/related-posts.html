{% comment %}Related Posts Component - Minimal Version{% endcomment %}

{% assign current_lang = page.lang | default: "zh" %}
{% assign related_posts = site.posts | where: "lang", current_lang | limit: 5 %}

{% if related_posts.size > 1 %}
<section class="related-posts">
  <h3>{% if current_lang == "en" %}Related Posts{% else %}相关文章{% endif %}</h3>
  <ul>
    {% for post in related_posts %}
      {% unless post.url == page.url %}
      <li>
        <a href="{{ post.url | relative_url }}">{{ post.title | escape }}</a>
        <span class="post-date">{{ post.date | date: "%b %d, %Y" }}</span>
      </li>
      {% endunless %}
    {% endfor %}
  </ul>
</section>
{% endif %}